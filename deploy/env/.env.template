# -----------------------------------------
# ОБЩИЙ ФАЙЛ КОНФИГУРАЦИИ МИКРОСЕРВИСНОЙ АРХИТЕКТУРЫ ROCKET SHOP
# -----------------------------------------
# Этот файл содержит все переменные окружения для всех сервисов
# с префиксами для избежания конфликтов имен.
# -----------------------------------------

# -----------------------------------------
# OPENTELEMETRY И ЛОГИРОВАНИЕ (ГЛОБАЛЬНЫЕ)
# -----------------------------------------

# Включить отправку телеметрии в OpenTelemetry Collector
OTLP_ENABLED=true

# Адрес OpenTelemetry Collector (gRPC endpoint)
OTLP_ENDPOINT=localhost:4317

# -----------------------------------------
# ORDER СЕРВИС
# -----------------------------------------

# HTTP сервер
ORDER_HTTP_HOST=0.0.0.0
ORDER_HTTP_PORT=8080

# PostgreSQL
ORDER_POSTGRES_USER=order_user
ORDER_POSTGRES_PASSWORD=order_password
ORDER_POSTGRES_DB=order_db
ORDER_POSTGRES_HOST=order-postgres
ORDER_POSTGRES_PORT=5432
ORDER_DB_URI=postgres://order_user:order_password@order-postgres:5432/order_db?sslmode=disable
ORDER_MIGRATIONS_DIR=/app/migrations

# Внешние gRPC клиенты
ORDER_INVENTORY_GRPC_ADDRESS=inventory-service:50051
ORDER_PAYMENT_GRPC_ADDRESS=payment-service:50052
IAM_GRPC_ADDRESS=iam-service:50053

# Логгер
ORDER_LOG_LEVEL=info
ORDER_LOG_AS_JSON=true
SERVICE_NAME=order

# Prometheus Metrics
ORDER_METRICS_PORT=9090

# -----------------------------------------
# INVENTORY СЕРВИС
# -----------------------------------------

# gRPC сервер
INVENTORY_GRPC_HOST=0.0.0.0
INVENTORY_GRPC_PORT=50051

# MongoDB
INVENTORY_MONGO_IMAGE=mongo:7
INVENTORY_MONGO_USER=inventory_user
INVENTORY_MONGO_PASSWORD=inventory_password
INVENTORY_MONGO_DB=inventory_db
INVENTORY_MONGO_HOST=inventory-mongodb
INVENTORY_MONGO_PORT=27017
INVENTORY_MONGO_URI=mongodb://inventory_user:inventory_password@inventory-mongodb:27017

# Внешние gRPC клиенты
INVENTORY_IAM_GRPC_ADDRESS=iam-service:50053

# Логгер
INVENTORY_LOG_LEVEL=info
INVENTORY_LOG_AS_JSON=true

# Prometheus Metrics
INVENTORY_METRICS_PORT=9092

# -----------------------------------------
# PAYMENT СЕРВИС
# -----------------------------------------

# gRPC сервер
PAYMENT_GRPC_HOST=0.0.0.0
PAYMENT_GRPC_PORT=50052

# Логгер
PAYMENT_LOG_LEVEL=info
PAYMENT_LOG_AS_JSON=true

# Prometheus Metrics
PAYMENT_METRICS_PORT=9093

# -----------------------------------------
# NOTIFICATION СЕРВИС
# -----------------------------------------

# Логгер
NOTIFICATION_LOG_LEVEL=info
NOTIFICATION_LOG_AS_JSON=true

# Prometheus Metrics
NOTIFICATION_METRICS_PORT=9094

# Telegram Bot (опционально)
TELEGRAM_BOT_TOKEN=
TELEGRAM_BOT_CHAT_ID=

# -----------------------------------------
# ASSEMBLY СЕРВИС
# -----------------------------------------

# Логгер
ASSEMBLY_LOG_LEVEL=info
ASSEMBLY_LOG_AS_JSON=true

# Prometheus Metrics
ASSEMBLY_METRICS_PORT=9091

# -----------------------------------------
# IAM СЕРВИС
# -----------------------------------------

# gRPC сервер
IAM_GRPC_HOST=0.0.0.0
IAM_GRPC_PORT=50053

# PostgreSQL
IAM_POSTGRES_USER=iam_user
IAM_POSTGRES_PASSWORD=iam_password
IAM_POSTGRES_DB=iam_db
IAM_POSTGRES_HOST=iam-postgres
IAM_POSTGRES_PORT=5432

# Redis
IAM_REDIS_HOST=iam-redis
IAM_REDIS_PORT=6379
IAM_REDIS_PASSWORD=
IAM_REDIS_DB=0

# Логгер
IAM_LOG_LEVEL=info
IAM_LOG_AS_JSON=true

# Prometheus Metrics
IAM_METRICS_PORT=9095

# -----------------------------------------
# KAFKA КОНФИГУРАЦИЯ
# -----------------------------------------

# Список брокеров Kafka (через запятую)
KAFKA_BROKERS=kafka:9092

# Kafka Topics
ORDER_PAID_TOPIC=order.paid
ORDER_ASSEMBLED_TOPIC=ship.assembled

# Kafka Consumer Groups
ORDER_PAID_CONSUMER_GROUP=assembly-consumer-group
ORDER_ASSEMBLED_CONSUMER_GROUP=order-consumer-group
NOTIFICATION_PAID_CONSUMER_GROUP=notification-paid-consumer
NOTIFICATION_ASSEMBLED_CONSUMER_GROUP=notification-assembled-consumer
